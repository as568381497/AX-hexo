<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!--
    Blog Theme for Hexo: St. Andrews
    Designed by Sharvari Desai
    https://gumroad.com/l/hexo-theme-standrews
  -->

  <!-- Favicon -->
  
      <link rel="icon" href="/images/logo.png" type="image/x-icon" />
  

  <!-- Title -->
  
  <title>阶段小结（二） - 阿西</title>

  <!--Description-->
  
      <meta name="description" content="这段时间，我完成了第二款和第三款APP的开发。
第二个应用是关于王者荣耀的，属于新闻类的APP吧，主要的功能是展示资讯信息和模拟器的实现，而后来，因为模拟器用了网上的WEB页面，所以跳过了这个麻烦的部分。而对与框架，整个框架的搭建跟主流的应用一样，导航栏页面有四个嵌套的子页面，而子页面里面再嵌套子页">
  

  <!--Author-->
  
      <meta name="author" content="Chen Xin">
  

  <!--Open Graph Title-->
  
      <meta property="og:title" content="阶段小结（二）"/>
  

  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="阿西"/>

  <!-- Pure CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css?family=EB+Garamond|Montserrat:300" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Analytics -->
  
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-71862489-2', 'auto');
        ga('send', 'pageview');
    </script>


</head>


  <body>

		<div class="container my-4">
  <nav class="navbar navbar-toggleable-sm navbar-light px-1 py-3 my-3 mb-sm-3">
    <button class="navbar-toggler navbar-toggler-right py-2" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand ml-2" href="/"><span class="title">阿西</span></a>
    <div class="collapse navbar-collapse text-center mt-3 mt-md-0" id="navbarCollapse">
      <ul class="navbar-nav ml-auto my-auto">
        
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
        
          <li class="nav-item">
            <a class="nav-link" href="/about">About</a>
          </li>
        
          <li class="nav-item">
            <a class="nav-link" href="/contact">contact</a>
          </li>
        
      </ul>
      <hr class="hidden-md-up" />
    </div>
  </nav>
</div>


		<div class="container">
			
  <div class="row">
    <div class="col-12">
          <img class="img-fluid cover-image" src="/images/阶段小结（二）/icon.jpeg" alt="阶段小结（二）">
    </div>
  </div>

<div class="row">
  <div class="col-12 col-lg-8 offset-lg-2 mt-4">

    <div class="post-page text-center my-4">
      <h1>阶段小结（二）</h1>
      <hr>
      <span class="date">2017-09-02</span>
    </div>

    <p>这段时间，我完成了第二款和第三款APP的开发。</p>
<p>第二个应用是关于王者荣耀的，属于新闻类的APP吧，主要的功能是展示资讯信息和模拟器的实现，而后来，因为模拟器用了网上的WEB页面，所以跳过了这个麻烦的部分。而对与框架，整个框架的搭建跟主流的应用一样，导航栏页面有四个嵌套的子页面，而子页面里面再嵌套子页面，以前想复杂了，现在做完了发现其实很简单，这里也遇到了一个坑，我是用的pageViewController做的，在滑动页面切换的时候，pageViewController每一次滑动都会加载前一个页面和后一个页面，也就是说，他滑动的时候，会加载前一个页面，还有后一个页面，展示的这个页面是在之前就加载好了的，所以不是加载的当前展示的这个页面，要调节好这个顺序，还有就是pageViewController在滑动的时候，要获取当前这个子页面的属性的话，要调用pageViewController的Will的方法获取。</p>
<p>获取数据的时候需要考虑获取数据的状态和顺序，特别是用View展示的时候需要考虑到复用或者数据重复发送的时候，数据怎么展示，每次获取到数据，就需要刷新View，这里刷新要在主线程里面刷新。</p>
<p>另外，高度自适应，对于tableViewCell，tableView有专门的属性控制自适应，是一个估计的值，自己估计下写进去就好了。但是值是一回事，需要搭配里面的view来做自适应，里面的View在设置约束的时候，要看、好好考虑，最好能占满整个Cell，因为会有cell的复用，在滑动tableView的时候，Cell每次复用都会计算。</p>
<p>也是在这个里面接触了Web和移动端的混合开发，我喜欢用Css，因为简单啊~~哈哈~js还没看~后面去花时间看看，webView在加载出来web页面，这里也需要注意一点，需要修改web页面的话，最好在加载完成后在修改，不然会有很多东西使用不了，或者显示不完整，web页面里面。</p>
<p>还有就是：</p>
<p><code>有问题一定要沟通，沟通！！！</code></p>
<p>小福利：<br>自动计算日期：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">//输入天数返回当天到后面若干天的日期</div><div class="line">- (NSMutableArray*)GetTomorrowDay:(int)day</div><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">NSDate*date = [NSDatedate];</div><div class="line"></div><div class="line">NSMutableArray*arr = [NSMutableArrayarray];</div><div class="line"></div><div class="line">NSCalendar*gregorian = [[NSCalendaralloc]initWithCalendarIdenti</div><div class="line">fier:NSCalendarIdentifierGregorian];</div><div class="line"></div><div class="line">NSDateComponents*components = [gregoriancomponents:NSCalendarUnit</div><div class="line">Weekday|NSCalendarUnitYear|NSCalendarUnitMonth|NSCalendarUnitDay</div><div class="line">fromDate:date];</div><div class="line"></div><div class="line">NSDateFormatter*formater = [[NSDateFormatteralloc]init];</div><div class="line"></div><div class="line">[formatersetDateFormat:@&quot;MM-dd&quot;];</div><div class="line"></div><div class="line">NSString*curTime = [formaterstringFromDate:date];</div><div class="line"></div><div class="line">[arraddObject:curTime];</div><div class="line"></div><div class="line">for(inti =1; i</div><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">[componentssetDay:([componentsday]+1)];</div><div class="line"></div><div class="line">NSDate*beginningOfWeek = [gregoriandateFromComponents:components]</div><div class="line">;</div><div class="line"></div><div class="line">NSDateFormatter*dateday = [[NSDateFormatteralloc]init];</div><div class="line"></div><div class="line">[datedaysetDateFormat:@&quot;MM-dd&quot;];</div><div class="line"></div><div class="line">[arraddObject:[datedaystringFromDate:beginningOfWeek]];</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">returnarr;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.后台播放</p>
<p>这是一段很神奇的代码，除了实现后台播放，还顺带实现了静音播放，GET</p>
<p>myApp-Info.plist中添加UIBackgroundModes键值，添加子键值为audio。</p>
<p>然后在程序中添加入下代码，最好在AppDelegate里面加入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">AVAudioSession*session=[AVAudioSessionsharedInstance];</div><div class="line"></div><div class="line">[sessionsetActive:YESerror:nil];</div><div class="line"></div><div class="line">[sessionsetCategory:AVAudioSessionCategoryPlaybackerror:nil];</div></pre></td></tr></table></figure></p>
<p>3,突发事件，中断播放（打电话）</p>
<p>–&gt;在通知中心注册一个事件中断的通知：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">//回调两次，开始和结束，最好写在AppDelegate里面</div><div class="line"></div><div class="line">[[NSNotificationCenter defaultCenter] addObserver:self selector:</div><div class="line">@selector(handleInterreption:) name:AVAudioSessionInterruptionNo</div><div class="line">tification object:[AVAudioSession sharedInstance]];</div><div class="line"></div><div class="line">--&gt;实现接收到中断通知时的方法</div><div class="line"></div><div class="line">//处理中断事件</div><div class="line"></div><div class="line">-(void)handleInterreption:(NSNotification *)sender</div><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">if(_played)</div><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">//操作一</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">else</div><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">//操作二</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>


    


  </div>
</div>



			<footer class="text-center mt-5 py-5">
  
  
    <a href="https://twitter.com/axibreaking" target="_blank"><i class="fa fa-twitter mr-4"></i></a>
  
  
    <a href="https://www.facebook.com/profile.php?id=100021814850770" target="_blank"><i class="fa fa-facebook mr-4"></i></a>
  
  
    <a href="https://www.instagram.com" target="_blank"><i class="fa fa-instagram mr-4"></i></a>
  
  
    <a href="https://www.linkedin.com" target="_blank"><i class="fa fa-linkedin mr-4"></i></a>
  
  
  
    <a href="https://github.com/as568381497" target="_blank"><i class="fa fa-github mr-4"></i></a>
  
  
  
  
</footer>

		</div>

		<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

<!-- Disqus Comments -->



  </body>
</html>
